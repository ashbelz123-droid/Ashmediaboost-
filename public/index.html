<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AshMediaBoost Packages</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>AshMediaBoost Packages</h1>

    <!-- Currency Selection -->
    <div class="currency-select">
      <label for="currency">Select Currency:</label>
      <select id="currency">
        <option value="USD">USD ðŸ‡ºðŸ‡¸</option>
        <option value="UGX">UGX ðŸ‡ºðŸ‡¬</option>
        <option value="KES">KES ðŸ‡°ðŸ‡ª</option>
      </select>
      <button id="fetchPackages">Load Packages</button>
    </div>

    <!-- Packages Display -->
    <div id="packages" class="packages"></div>
  </div>

  <script>
    const packagesDiv = document.getElementById("packages");
    const fetchBtn = document.getElementById("fetchPackages");
    const currencySelect = document.getElementById("currency");

    // Map providers to icons
    const providerIcons = {
      "Basic": "https://cdn-icons-png.flaticon.com/512/190/190411.png",
      "Standard": "https://cdn-icons-png.flaticon.com/512/190/190422.png",
      "Premium": "https://cdn-icons-png.flaticon.com/512/190/190445.png"
    };

    // Fetch packages
    fetchBtn.addEventListener("click", async () => {
      packagesDiv.innerHTML = "Loading...";
      const currency = currencySelect.value;

      try {
        const res = await fetch(`https://your-render-backend-url/packages/${currency}`);
        const data = await res.json();

        if (data.error) {
          packagesDiv.innerHTML = `<p class="error">${data.error}</p>`;
          return;
        }

        // Render package cards
        packagesDiv.innerHTML = data.map(pkg => `
          <div class="package-card">
            <h2>${pkg.name}</h2>
            <p>
              <strong>Provider:</strong> 
              <img src="${providerIcons[pkg.provider] || ''}" alt="${pkg.provider}" width="20" style="vertical-align:middle; margin-right:5px;">
              ${pkg.provider}
            </p>
            <p>${pkg.description}</p>
            <p><strong>Price:</strong> ${pkg.local_price} ${pkg.currency}</p>
          </div>
        `).join("");
      } catch (err) {
        packagesDiv.innerHTML = `<p class="error">Failed to fetch packages</p>`;
      }
    });
  </script>
</body>
</html>
